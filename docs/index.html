---

title: COMS 4995 Competition


keywords: fastai
sidebar: home_sidebar



nb_path: "index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Content">Content<a class="anchor-link" href="#Content"> </a></h2><ul>
<li><code>dataset</code>: where training and testing data are stored</li>
<li><code>docs</code>: example code on topics of Tensorflow and feature exploration</li>
<li><code>airathon</code>: utility packages and CLI tools<ul>
<li><code>airathon.model.tfrecord</code>: tf record creation</li>
<li><code>airathon.metrics</code>: R2 implementation</li>
<li><code>airathon.model</code>: synced with <code>model.ipynb</code> and 
<code>model.modis.ipynb</code></li>
<li><code>airathon.paths</code>: helper function for finding files in repo</li>
</ul>
</li>
<li><code>saves</code>: model training checkpoint</li>
<li><code>Leaderboard</code>: proof of getting on leaderboard on Feb 17</li>
<li><code>test</code>: unit testing</li>
</ul>
<h3 id="Notebook">Notebook<a class="anchor-link" href="#Notebook"> </a></h3><ul>
<li><code>model.ipynb</code>: where the model is developed</li>
<li><code>model.modis.ipynb</code>: modis loading code</li>
<li><code>tfrecord.ipynb</code>: TFRecord creationg</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Get-Started">Get Started<a class="anchor-link" href="#Get-Started"> </a></h2><h3 id="Setting-Up-Virtual-Machine">Setting Up Virtual Machine<a class="anchor-link" href="#Setting-Up-Virtual-Machine"> </a></h3><ol>
<li>Create a <a href="https://cloud.google.com/deep-learning-vm">deep learning VM</a></li>
<li>If GPU cannot be detected, run NVIDIA driver install script provided by
Google
<pre><code>$ sudo /opt/deeplearning/install-driver.sh</code></pre>
</li>
</ol>
<h3 id="Download-Prebuilt-TF-Records">Download Prebuilt TF Records<a class="anchor-link" href="#Download-Prebuilt-TF-Records"> </a></h3>
<pre><code>$ gsutil cp gs://zc2616_coms4995_22_competition/train-maiac-2000.tfrecord dataset/train/maiac/maiac-2000.tfrecord
$ gsutil cp gs://zc2616_coms4995_22_competition/test-maiac.tfrecord dataset/test/maiac/maiac.tfrecord</code></pre>
<h3 id="Installing-Python-and-Dependencies">Installing Python and Dependencies<a class="anchor-link" href="#Installing-Python-and-Dependencies"> </a></h3><ol>
<li>Create a conda environment from <code>requirements.txt</code></li>
<li>Run <code>pip install -e .</code> at repo root to install the repo as an editable python
package</li>
</ol>
<h3 id="Jupyter-Notebook">Jupyter Notebook<a class="anchor-link" href="#Jupyter-Notebook"> </a></h3><p>Open <a href="model.ipynb">model.ipynb</a> to train the model</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Development">Development<a class="anchor-link" href="#Development"> </a></h2><h4 id="Creating-TF-Records">Creating TF Records<a class="anchor-link" href="#Creating-TF-Records"> </a></h4><p>First download raw data from Amazon S3</p>

<pre><code>$ aws s3 cp s3://drivendata-competition-airathon-public-us/pm25/test/maiac dataset/test/maiac/ --no-sign-request --recursive
$ aws s3 cp s3://drivendata-competition-airathon-public-us/pm25/train/maiac dataset/train/maiac/ --no-sign-request --recursive</code></pre>
<p>Then create tf records using</p>

<pre><code>$ airathon tfrecord dataset/metadata/train_labels.csv train
$ airathon tfrecord dataset/metadata/submission_format.csv test</code></pre>
<p>Created TF records will be placed at</p>
<ol>
<li><code>dataset/train/maiac/maiac.tfrecord</code></li>
<li><code>dataset/test/maiac/maiac.tfrecord</code></li>
</ol>
<h3 id="Developing-Model">Developing Model<a class="anchor-link" href="#Developing-Model"> </a></h3><p>Model and preprocessing should be developed in <a href="model.ipynb">model.ipynb</a></p>
<h3 id="Syncing-With-airathon-package">Syncing With <code>airathon</code> package<a class="anchor-link" href="#Syncing-With-airathon-package"> </a></h3><ul>
<li><code>nbdev_build_lib</code></li>
</ul>
<h3 id="Source-Control">Source Control<a class="anchor-link" href="#Source-Control"> </a></h3><p>Before pushing notebook, make sure to run <code>nbdev_clean_nbs</code> to clean notebooks</p>

</div>
</div>
</div>
</div>
 

